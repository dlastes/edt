(function(){"use strict";var e={9940:function(e,t,a){a(1703);let o="";const n=document.getElementById("json_data");if(n&&n.textContent){const e=JSON.parse(n.textContent);"api"in e&&(o=e.api)}function i(e){if(!document.cookie)return null;const t=document.cookie.split(";").map((e=>e.trim())).filter((t=>t.startsWith(e+"=")));return 0===t.length?null:decodeURIComponent(t[0].split("=")[1])}const l=i("csrftoken");async function r(e,t){const a=t;t=Object.assign({method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin"},t),t.headers=Object.assign({"X-CSRFToken":l,"Content-Type":"application/json"},t.headers);let n="";a&&(n=Object.keys(a).map((e=>e+"="+a[e])).join("&"));const i=`${o}${e}/?${n}`;console.log(`Fetching ${i}...`);const r=await fetch(i,t),s=await r.json()||{};if(!r.ok){const e=s.error||`${r.status}`;throw new Error(e)}return s}async function s(e,t,a){if(!["PUT","POST","DELETE","PATCH"].includes(e))return Promise.reject("Method must be either PUT, POST, PATCH, or DELETE");const n=new Headers;n.set("Content-Type","application/json"),l&&n.set("X-CSRFToken",l);const i={method:e,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:n,redirect:"follow",referrerPolicy:"no-referrer"};a.data&&(i.body=JSON.stringify(a.data));let r="/";a.id&&(r=`/${a.id}/`);const s=`${o}${t}${r}`;return console.log(`Updating ${s}...`),await fetch(s,i).then((async e=>{const t=await e.json();if(!e.ok){const a=t||`Error ${e.status}: ${e.statusText}`;return Promise.reject(a)}return t})).catch((e=>Promise.reject(e)))}async function u(e,t,a){const o={id:t,data:a};return await s("PUT",e,o)}async function c(e,t){const a={data:t};return await s("POST",e,a)}async function d(e,t,a){const o={id:t,data:a};return await s("PATCH",e,o)}function v(e,t){const a={id:t};return s("DELETE",e,a)}const p={departments:"fetch/alldepts",rooms:"rooms/room",weekdays:"fetch/weekdays",timesettings:"base/timesettings",roomreservation:"roomreservations/reservation",roomreservationtype:"roomreservations/reservationtype",reservationperiodicity:"roomreservations/reservationperiodicity",reservationperiodicitytype:"roomreservations/reservationperiodicitytype",reservationperiodicitybyweek:"roomreservations/reservationperiodicitybyweek",reservationperiodicityeachmonthsamedate:"roomreservations/reservationperiodicityeachmonthsamedate",reservationperiodicitybymonth:"roomreservations/reservationperiodicitybymonth",reservationperiodicitybymonthxchoice:"roomreservations/reservationperiodicitybymonthxchoice",courses:"courses/courses",scheduledcourses:"fetch/scheduledcourses",coursetypes:"courses/type",users:"user/users",booleanroomattributes:"rooms/booleanattributes",numericroomattributes:"rooms/numericattributes",booleanroomattributevalues:"rooms/booleanattributevalues",numericroomattributevalues:"rooms/numericattributevalues"},m=(e,t,a)=>r(e,t?f(t,a):{});function y(e,t){return`${e}/${t}`}const b={fetch:{booleanRoomAttributes(){return m(p.booleanroomattributes)},booleanRoomAttributeValues(){return m(p.booleanroomattributevalues)},courses(e){return m(p.courses,e,[["department","dept"]])},courseTypes(e){return m(p.coursetypes,e,[["department","dept"]])},departments(){return m(p.departments)},numericRoomAttributes(){return m(p.numericroomattributes)},numericRoomAttributeValues(){return m(p.numericroomattributevalues)},reservationPeriodicities(){return m(p.reservationperiodicity)},reservationPeriodicity(e){return m(p.reservationperiodicity,{id:e})},reservationPeriodicityByMonthXChoices(){return m(p.reservationperiodicitybymonthxchoice)},reservationPeriodicityTypes(){return m(p.reservationperiodicitytype)},room(e,t){return m(y(p.rooms,e.toString()),t)},rooms(e){return m(p.rooms,e,[["department","dept"]])},roomReservations(e){return m(p.roomreservation,e,[["roomId","room"],["periodicityId","periodicity"]])},roomReservationTypes(){return m(p.roomreservationtype)},scheduledCourses(e){return m(p.scheduledcourses,e,[["department","dept"]])},timeSettings(){return m(p.timesettings)},users(){return m(p.users)},weekdays(e){return m(p.weekdays,e)}},put:{roomReservation(e){return u(p.roomreservation,e.id,e)},reservationPeriodicityByMonth(e){return u(p.reservationperiodicitybymonth,e.id,e)},reservationPeriodicityByWeek(e){return u(p.reservationperiodicitybyweek,e.id,e)},reservationPeriodicityEachMonthSameDate(e){return u(p.reservationperiodicityeachmonthsamedate,e.id,e)}},post:{roomReservation(e){return c(p.roomreservation,e)},reservationPeriodicityByMonth(e){return c(p.reservationperiodicitybymonth,e)},reservationPeriodicityByWeek(e){return c(p.reservationperiodicitybyweek,e)},reservationPeriodicityEachMonthSameDate(e){return c(p.reservationperiodicityeachmonthsamedate,e)}},patch:{reservationPeriodicityByMonth(e,t){return d(p.reservationperiodicitybymonth,e,t)},reservationPeriodicityByWeek(e,t){return d(p.reservationperiodicitybyweek,e,t)},reservationPeriodicityEachMonthSameDate(e,t){return d(p.reservationperiodicityeachmonthsamedate,e,t)}},delete:{reservationPeriodicity(e){return v(p.reservationperiodicity,e)},roomReservation(e){return v(p.roomreservation,e)}}};function f(e,t){let a=Object.entries(e).filter((e=>e[1]));return t&&(a=a.map((e=>{const a=t.find((t=>t[0]===e[0])),o=a?a[1]:e[0];return[o,e[1]]}))),Object.fromEntries(a)}var h=a(821);const w=Symbol("currentWeekKey"),_=Symbol("api");function k(e,t){const a=(0,h.f3)(e,t);if(!a)throw new Error(`${e.toString()} was not provided.`);return a}var g=a(1595),D=(a(7658),a(2482));class S{constructor(e,t){(0,D.Z)(this,"value",void 0),(0,D.Z)(this,"text",void 0),this.value=e,this.text=t}}function x(e){const t=Math.trunc(e),a=Math.round(60*(e-t));return`${t}:${C(a)}`}function C(e){if("string"===typeof e&&(e=parseInt(e,10),isNaN(e)))throw new Error(`Given value (${e}) cannot not be parsed as number`);return`${e<10?`0${e}`:e}`}function T(e,t){if(e instanceof Object&&!(e instanceof Error)){const a=e;Object.keys(a).forEach((e=>{t?.("danger",`${e}: ${a[e]}`)}))}else t?.("danger",`${e}.`)}function H(e,t){const a={};return e.forEach((e=>{const o=t(e);o in a||(a[o]=[]),a[o].push(e)})),a}function M(e){const t=x(e/60);return new S(e,t)}function F(e){return e.map((e=>e.id))}const U={name:"BaseCalendar",components:{}};var j=(0,h.aZ)({...U,setup(e,{expose:t}){const a=(0,h.iH)({}),o=(0,h.iH)("");function n(e,t){a.value[e]=t}function i(e){l(),a.value[e].openContextMenu()&&(o.value=e)}function l(){o.value&&a.value[o.value].closeContextMenu()}function r(){l()}return t({openContextMenu:i,closeCurrentContextMenu:l,storeSlotInterface:n}),(e,t)=>((0,h.wg)(),(0,h.iD)("div",{onClick:r},[(0,h.WI)(e.$slots,"table")]))}});const P=j;var $=P;const O={class:"w-100"},E={class:"p-0 flex-nowrap"},B=(0,h._)("th",{class:"p-0 me-3"},null,-1),R={class:"p-0 h-100",style:{"min-width":"50px",width:"50px"}},I={class:"text-wrap"},W=(0,h._)("hr",{class:"border border-primary border-1 w-100 position-absolute top-0",style:{transform:"translateY(-3px)"}},null,-1),A=["onMousedown","onMouseup"],Y={name:"HourCalendar",components:{}};var L=(0,h.aZ)({...Y,props:{values:null},emits:["drag"],setup(e,{emit:t}){const a=e,o=15,n=30,i=(0,h.Fl)((()=>{const e={};return Object.keys(a.values.slots).forEach((t=>{t in e||(e[t]=[]),e[t]=a.values.slots[t].filter((e=>f(e.slotData)))})),e})),l=(0,h.Fl)((()=>{const e=Math.trunc(a.values.startTime/60),t=Math.trunc(a.values.endTime/60),o=[];for(let a=e;a<=t;++a){const e={value:60*a,text:x(a)};o.push(e)}return o})),r={startDate:new Date,startTime:{text:"",value:0},endDate:new Date,endTime:{text:"",value:0}};function s(e,t){return Math.round((a.values.startTime+e/d*60)/t)*t}function u(e,t){const n=e.split("/");r.startDate=new Date(`${a.values.year}-${n[1]}-${n[0]}`);const i=s(t.offsetY,o);r.startTime={text:x(i/60),value:i}}function c(e,o){const i=e.split("/");r.endDate=new Date(`${a.values.year}-${i[1]}-${i[0]}`);const l=r.startTime.value;let u=s(o.offsetY,n);u-l<5&&(u=l+60),u=l+Math.round((u-l)/n)*n,r.endTime={text:x(u/60),value:u},t("drag",r)}const d=50,v=(0,h.Fl)((()=>d*(Math.trunc(a.values.endTime/60)-Math.trunc(a.values.startTime/60)))),p=(0,h.Fl)((()=>`${v.value}px`));function m(e){return 100*(e-a.values.startTime)/(a.values.endTime-a.values.startTime)}function y(e){const t=m(e.startTime.value),a=m(e.endTime.value),o=a-t;return`${o}%`}function b(e){const t=m(e);return`${t}%`}function f(e){const t=e.startTime.value>=a.values.startTime;return t||console.log(`Slot ${e.title} cannot be displayed because it does not begin after day start time`),t}function w(e){const t=b(e.startTime.value),a=y(e);return{height:a,top:t,position:"absolute","text-align":"center"}}function _(e){const t=b(e.value);return{top:t,position:"absolute",width:"100%"}}const k=(0,h.iH)();function g(e){k.value&&k.value.openContextMenu(e)}function D(e,t){k.value&&k.value.storeSlotInterface(e,t)}return(e,t)=>((0,h.wg)(),(0,h.j4)($,{ref_key:"calendar",ref:k},{table:(0,h.w5)((()=>[(0,h._)("table",O,[(0,h._)("tr",E,[B,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.days,(e=>((0,h.wg)(),(0,h.iD)("th",{key:e.date,class:(0,h.C_)(["col text-center border-dark border-bottom border-end border-top",{"border-start border-dark":e===a.values.days[0]}])},[(0,h._)("div",null,(0,h.zw)(e.name)+" "+(0,h.zw)(e.date),1)],2)))),128))]),(0,h._)("tr",{class:"flex-nowrap position-relative",style:(0,h.j5)({height:(0,h.SU)(p)})},[(0,h._)("td",R,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(l),(e=>((0,h.wg)(),(0,h.iD)("div",{key:e.value,style:(0,h.j5)(_(e)),class:"translate-middle-y"},[(0,h._)("h6",I,(0,h.zw)(e.text),1),W],4)))),128))]),((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.days,(e=>((0,h.wg)(),(0,h.iD)("td",{key:e.date,class:(0,h.C_)(["col border-dark border-bottom border-end p-0",{"border-start border-dark":e===a.values.days[0]}]),style:(0,h.j5)([{height:(0,h.SU)(p)},{"min-width":"65px"}])},[(0,h._)("div",{class:"position-relative h-100",onMousedown:(0,h.iM)((t=>u(e.date,t)),["left","self"]),onMouseup:(0,h.iM)((t=>c(e.date,t)),["left","self"])},[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(i)[e.date],(e=>((0,h.wg)(),(0,h.j4)((0,h.LL)(e.component.value),{key:e.slotData.id,data:e.slotData,actions:e.actions,style:(0,h.j5)(w(e.slotData)),class:"noselect slot m-0 border border-dark",onContextmenu:[t[0]||(t[0]=(0,h.iM)((()=>{}),["right","prevent"])),t=>g(e.slotData.id)],onInterface:D},null,40,["data","actions","style","onContextmenu"])))),128))],40,A)],6)))),128))],4)])])),_:1},512))}});const Z=L;var z=Z,V=a(2791);const q={class:"row"},K={name:"WeekPicker",components:{}};var N=(0,h.aZ)({...K,props:{week:null,year:null},emits:["update:week","update:year"],setup(e,{emit:t}){const a=(0,h.iH)([]);(0,h.m0)((()=>{const e=a.value[0];if(!e)return;const o=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-o.getTime())/864e5);t("update:week",Math.ceil(n/7)),t("update:year",e.getFullYear())}));const o=(0,h.iH)("fr"),n=(0,h.iH)("Aujourd'hui");return(e,t)=>((0,h.wg)(),(0,h.iD)("div",q,[(0,h.Wm)((0,h.SU)(V.Z),{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),locale:o.value,inline:"","week-numbers":"","week-picker":"","enable-time-picker":!1,"auto-apply":"","show-now-button":"","now-button-label":n.value},null,8,["modelValue","locale","now-button-label"])]))}});const X=N;var J=X;const G={class:"w-100"},Q=(0,h._)("th",{class:"col text-center border-dark border"},"Room",-1),ee={class:"h-100"},te=["onClick"],ae=["onClick"],oe={key:0},ne={name:"RoomCalendar",components:{}};var ie=(0,h.aZ)({...ne,props:{values:null},emits:["newSlot","rowHeaderClick"],setup(e,{emit:t}){const a=e;function o(e,o){const n=e.split("/");t("newSlot",new Date(`${a.values.year}-${n[1]}-${n[0]}`),`${o}`)}const n=(0,h.iH)();function i(e){n.value&&n.value.openContextMenu(e)}function l(e,t){n.value&&n.value.storeSlotInterface(e,t)}return(e,t)=>((0,h.wg)(),(0,h.j4)($,{ref_key:"calendar",ref:n},{table:(0,h.w5)((()=>[(0,h._)("table",G,[(0,h._)("tr",null,[Q,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.days,(e=>((0,h.wg)(),(0,h.iD)("th",{key:e.date,class:"col text-center border-dark border"},(0,h.zw)(e.name)+" "+(0,h.zw)(e.date),1)))),128))]),((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.rooms,(n=>((0,h.wg)(),(0,h.iD)("tr",{key:n.id,class:"border-dark border align-top h-100"},[(0,h._)("td",ee,[(0,h._)("button",{type:"button",class:"btn btn-outline-dark h-100 w-100 align-middle rounded-0",onClick:t=>e.$emit("rowHeaderClick",n.id)},(0,h.zw)(n.name),9,te)]),((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.days,(e=>((0,h.wg)(),(0,h.iD)("td",{key:e.date,class:"border-dark border pb-3",onClick:(0,h.iM)((t=>o(e.date,n.id)),["self","left"])},[e.date in a.values.slots&&n.id in a.values.slots[e.date]?((0,h.wg)(),(0,h.iD)("div",oe,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.slots[e.date][n.id],(e=>((0,h.wg)(),(0,h.j4)((0,h.LL)(e.component.value),{key:e.slotData.id,data:e.slotData,actions:e.actions,class:"col noselect slot m-0 border border-dark",onContextmenu:[t[0]||(t[0]=(0,h.iM)((()=>{}),["right","prevent"])),t=>i(e.slotData.id)],onInterface:l},null,40,["data","actions","onContextmenu"])))),128))])):(0,h.kq)("",!0)],8,ae)))),128))])))),128))])])),_:1},512))}});const le=ie;var re=le;const se={class:"card p-0 m-0"},ue={class:"card-body p-1 m-0"},ce={class:"btn-group",role:"group","aria-label":"Slot context menu"},de={name:"CalendarSlotContextMenu",components:{}};var ve=(0,h.aZ)({...de,props:{onEdit:null,onDelete:null,onDuplicate:null},setup(e){const t=e;return(e,a)=>((0,h.wg)(),(0,h.iD)("div",se,[(0,h._)("div",ue,[(0,h._)("div",ce,[(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:a[0]||(a[0]=(...e)=>t.onEdit&&t.onEdit(...e))},"Edit"),(0,h._)("button",{type:"button",class:"btn btn-danger",onClick:a[1]||(a[1]=(...e)=>t.onDelete&&t.onDelete(...e))},"Delete"),(0,h._)("button",{type:"button",class:"btn btn-info",onClick:a[2]||(a[2]=(...e)=>t.onDuplicate&&t.onDuplicate(...e))},"Duplicate")])])]))}});const pe=ve;var me=pe;const ye={name:"DayPicker",components:{}};var be=(0,h.aZ)({...ye,props:{startDate:null,clearable:{type:Boolean},shouldReset:{type:Boolean},minDate:null},emits:["update:date","update:week","update:year","onReset"],setup(e,{emit:t}){const a=e,o=(0,h.Fl)({get(){return new Date(a.startDate)},set(e){const a=e;if(!a)return 1;const o=new Date(a.getFullYear(),0,1),n=Math.floor((a.getTime()-o.getTime())/864e5),i=C(a.getDate()),l=C(a.getMonth()+1),r=a.getFullYear();t("update:date",`${r}/${l}/${i}`),t("update:week",Math.ceil(n/7)),t("update:year",r)}});(0,h.YP)((()=>a.shouldReset),(e=>{e&&(o.value=new Date(a.startDate),t("onReset"))}));const n=(0,h.iH)("fr"),i=(0,h.iH)("Aujourd'hui");return(e,t)=>((0,h.wg)(),(0,h.j4)((0,h.SU)(V.Z),{modelValue:(0,h.SU)(o),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(o)?o.value=e:null),locale:n.value,"text-input":"",format:"dd/MM/yyyy","week-numbers":"","enable-time-picker":!1,"auto-apply":"","show-now-button":"","now-button-label":i.value,transitions:!1,"min-date":a.minDate,clearable:a.clearable},{"dp-input":(0,h.w5)((({value:t})=>[(0,h.WI)(e.$slots,"input",{value:t})])),_:3},8,["modelValue","locale","now-button-label","min-date","clearable"]))}});const fe=be;var he=fe,we=a(8877);const _e={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},ke={class:"modal-content"},ge={class:"modal-header"},De={id:"modalTitleLabel",class:"modal-title"},Se={class:"modal-body"},xe={class:"sticky-top"},Ce=(0,h._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),Te={class:"modal-footer"},He=["onClick","disabled"],Me=["onClick","disabled"],Fe={name:"ModalForm",components:{}};var Ue=(0,h.aZ)({...Fe,props:{isOpen:{type:Boolean},isLocked:{type:Boolean},onCancel:null,onSave:null},emits:["interface"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(),n=(0,h.iH)(!1),i=(0,h.iH)([]);function l(){if(!n.value)return;const e=we.u_.getOrCreateInstance(o.value);e&&e.show()}function r(){a.onCancel()}function s(){c("info","Sending data, please wait..."),a.onSave()}function u(){if(!n.value)return;const e=we.u_.getOrCreateInstance(o.value);e&&(d(),e.hide())}function c(e,t){i.value.push({level:e,message:t})}function d(){i.value=[]}return(0,h.YP)((()=>a.isOpen),(e=>{e?l():u()})),(0,h.bv)((()=>{n.value=!0,t("interface",{close:u,addAlert:c,dismissAlerts:d})})),(t,n)=>((0,h.wg)(),(0,h.iD)("div",{ref_key:"modalRef",ref:o,class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"modalTitleLabel","aria-hidden":"true"},[(0,h._)("div",_e,[(0,h._)("div",ke,[(0,h._)("div",ge,[(0,h._)("h5",De,[(0,h.WI)(t.$slots,"title")]),a.isLocked?(0,h.kq)("",!0):((0,h.wg)(),(0,h.iD)("button",{key:0,type:"button",class:"btn-close","aria-label":"Close",onClick:n[0]||(n[0]=(0,h.iM)(((...t)=>e.onCancel&&e.onCancel(...t)),["stop"]))}))]),(0,h._)("div",Se,[(0,h._)("div",xe,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(i.value,(e=>((0,h.wg)(),(0,h.iD)("div",{key:e.message,class:(0,h.C_)([`alert-${e.level}`,"alert alert-dismissible fade show"]),role:"alert"},[(0,h.Uk)((0,h.zw)(e.message)+" ",1),Ce],2)))),128))]),(0,h.WI)(t.$slots,"body")]),(0,h._)("div",Te,[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(r,["stop"]),disabled:a.isLocked}," Cancel ",8,He),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(s,["stop"]),disabled:a.isLocked}," Save ",8,Me)])])])],512))}});const je=Ue;var Pe=je;const $e={name:"TimePicker",components:{}};var Oe=(0,h.aZ)({...$e,props:{hours:null,minutes:null,shouldReset:{type:Boolean}},emits:["updateTime","onReset"],setup(e,{emit:t}){const a=e,o=(0,h.Fl)({get(){return{hours:a.hours,minutes:a.minutes}},set(e){t("updateTime",{hours:e.hours,minutes:e.minutes})}});return(0,h.YP)((()=>a.shouldReset),(e=>{e&&(o.value={hours:a.hours,minutes:a.minutes},t("onReset"))})),(e,t)=>((0,h.wg)(),(0,h.j4)((0,h.SU)(V.Z),{modelValue:(0,h.SU)(o),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(o)?o.value=e:null),"time-picker":"",transitions:!1,clearable:!1,"hours-increment":"-1","minutes-increment":"-1"},{"dp-input":(0,h.w5)((({value:t})=>[(0,h.WI)(e.$slots,"input",{value:t})])),_:3},8,["modelValue"]))}});const Ee=Oe;var Be=Ee;const Re={class:"mb-2"},Ie=["id","value","disabled"],We=["for"],Ae={key:0,class:"text-danger"},Ye={class:"form-floating"},Le=["disabled"],Ze=(0,h._)("label",{for:"input-weeks-interval",class:"form-label"},"Week interval",-1),ze={name:"PeriodicityByWeekEdit",components:{}};var Ve=(0,h.aZ)({...ze,props:{weekdays:null,model:null,isDisabled:{type:Boolean}},emits:["update:model"],setup(e,{emit:t}){const a=e,o=(0,h.iH)({id:a.model.id,start:a.model.start,end:a.model.end,periodicity_type:a.model.periodicity_type,bw_weeks_interval:a.model.bw_weeks_interval,bw_weekdays:a.model.bw_weekdays}),n=(0,h.Fl)({get(){return o.value.bw_weekdays},set(e){o.value.bw_weekdays=e,r()}}),i=(0,h.Fl)({get(){return o.value.bw_weeks_interval},set(e){o.value.bw_weeks_interval=e,r()}}),l=(0,h.Fl)((()=>0===n.value.length?"border border-danger rounded":""));function r(){t("update:model",o.value)}return(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h._)("div",Re,[(0,h._)("div",{class:(0,h.C_)((0,h.SU)(l))},[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.weekdays,(e=>((0,h.wg)(),(0,h.iD)("div",{key:e.num,class:"form-check form-check-inline"},[(0,h.wy)((0,h._)("input",{class:"form-check-input",type:"checkbox",id:`checkbox-weekday-${e.num}`,value:e.ref,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(n)?n.value=e:null),disabled:a.isDisabled},null,8,Ie),[[h.e8,(0,h.SU)(n)]]),(0,h._)("label",{class:"form-check-label",for:`checkbox-weekday-${e.num}`},(0,h.zw)(e.name),9,We)])))),128))],2),0===(0,h.SU)(n).length?((0,h.wg)(),(0,h.iD)("span",Ae,"* Required")):(0,h.kq)("",!0)]),(0,h._)("div",Ye,[(0,h.wy)((0,h._)("input",{type:"number",class:"form-control",id:"input-weeks-interval","onUpdate:modelValue":t[1]||(t[1]=e=>(0,h.dq)(i)?i.value=e:null),min:"1",disabled:a.isDisabled},null,8,Le),[[h.nr,(0,h.SU)(i)]]),Ze])]))}});const qe=Ve;var Ke=qe;const Ne={class:"input-group mb-3"},Xe=(0,h._)("span",{class:"input-group-text"},"Repeat each",-1),Je=["disabled"],Ge=(0,h._)("option",{value:void 0,disabled:""},"Select an occurrence number",-1),Qe=["value"],et=["disabled"],tt=(0,h._)("option",{value:"",disabled:""},"Select a day",-1),at=["value"],ot=(0,h._)("span",{class:"input-group-text"},"of each month",-1),nt={name:"PeriodicityByMonthEdit",components:{}};var it=(0,h.aZ)({...nt,props:{weekdays:null,model:null,isDisabled:{type:Boolean}},emits:["update:model"],setup(e,{emit:t}){const a=e,o=k(_),n=(0,h.iH)([]),i=(0,h.iH)({id:a.model.id,start:a.model.start,end:a.model.end,periodicity_type:a.model.periodicity_type,bm_day_choice:a.model.bm_day_choice,bm_x_choice:a.model.bm_x_choice}),l=(0,h.Fl)({get(){return a.model.bm_day_choice},set(e){i.value.bm_day_choice=e,s()}}),r=(0,h.Fl)({get(){return a.model.bm_x_choice},set(e){i.value.bm_x_choice=e,s()}});function s(){t("update:model",i.value)}const u=(0,h.Fl)((()=>l.value?"":"border border-danger"));return(0,h.bv)((()=>{o.fetch.reservationPeriodicityByMonthXChoices().then((e=>n.value=e))})),(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h._)("div",Ne,[Xe,(0,h.wy)((0,h._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(r)?r.value=e:null),class:(0,h.C_)(["form-select",(0,h.SU)(u)]),"aria-label":"Select occurrence number",disabled:a.isDisabled},[Ge,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(n.value,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e[0],value:e[0]},(0,h.zw)(e[1]),9,Qe)))),128))],10,Je),[[h.bM,(0,h.SU)(r)]]),(0,h.wy)((0,h._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>(0,h.dq)(l)?l.value=e:null),class:"form-select","aria-label":"Select a day",disabled:a.isDisabled},[tt,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.weekdays,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.num,value:e.ref},(0,h.zw)(e.name),9,at)))),128))],8,et),[[h.bM,(0,h.SU)(l)]]),ot])]))}});const lt=it;var rt=lt;const st=["disabled"],ut=(0,h._)("option",{value:void 0,disabled:""},"Select a periodicity type",-1),ct=["value"],dt={name:"PeriodicitySelect",components:{}};var vt=(0,h.aZ)({...dt,props:{types:null,weekdays:null,modelType:null,modelPeriodicity:null,isDisabled:{type:Boolean}},emits:["update:modelPeriodicity","update:modelType"],setup(e,{emit:t}){const a=e,o=(0,h.Fl)({get(){return a.modelType},set(e){t("update:modelType",e)}}),n=(0,h.iH)(a.modelPeriodicity);(0,h.YP)((()=>a.modelPeriodicity),(e=>{Object.values(n.value).forEach((t=>{t.start=e.BW.start,t.end=e.BW.end}))}));const i=(0,h.Fl)({get(){return n.value.BW},set(e){n.value.BW=e,t("update:modelPeriodicity",n.value)}}),l=(0,h.Fl)({get(){return n.value.BM},set(e){n.value.BM=e,t("update:modelPeriodicity",n.value)}});return(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h.wy)((0,h._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(o)?o.value=e:null),class:"form-select mb-2","aria-label":"Select periodicity type",disabled:a.isDisabled},[ut,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.types,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e[0],value:e},(0,h.zw)(e[1]),9,ct)))),128))],8,st),[[h.bM,(0,h.SU)(o)]]),(0,h.SU)(o)&&"BW"===(0,h.SU)(o)[0]?((0,h.wg)(),(0,h.j4)(Ke,{key:0,weekdays:a.weekdays,"is-disabled":a.isDisabled,model:(0,h.SU)(i),"onUpdate:model":t[1]||(t[1]=e=>(0,h.dq)(i)?i.value=e:null)},null,8,["weekdays","is-disabled","model"])):(0,h.kq)("",!0),(0,h.SU)(o)&&"BM"===(0,h.SU)(o)[0]?((0,h.wg)(),(0,h.j4)(rt,{key:1,weekdays:a.weekdays,"is-disabled":a.isDisabled,model:(0,h.SU)(l),"onUpdate:model":t[2]||(t[2]=e=>(0,h.dq)(l)?l.value=e:null)},null,8,["weekdays","is-disabled","model"])):(0,h.kq)("",!0)]))}});const pt=vt;var mt=pt;const yt={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},bt={class:"modal-content"},ft={class:"modal-header"},ht={id:"modalTitleLabel",class:"modal-title"},wt={class:"modal-body"},_t={class:"modal-footer"},kt=["onClick","disabled"],gt=["onClick","disabled"],Dt={key:0},St=(0,h._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),xt=(0,h._)("span",{class:"visually-hidden"},"Loading...",-1),Ct=[St,xt],Tt={key:1},Ht={name:"ModalDialog",components:{}};var Mt=(0,h.aZ)({...Ht,props:{isOpen:{type:Boolean},isLocked:{type:Boolean},onCancel:null,onConfirm:null},emits:["interface"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(!1),n=(0,h.iH)();function i(){a.onCancel?.()}function l(){a.onConfirm?.()}function r(){if(!o.value)return;const e=we.u_.getOrCreateInstance(n.value);e&&e.show()}function s(){if(!o.value)return;const e=we.u_.getOrCreateInstance(n.value);e&&e.hide()}return(0,h.YP)((()=>a.isOpen),(e=>{e?r():s()})),(0,h.bv)((()=>{o.value=!0,t("interface",{close:s})})),(e,t)=>((0,h.wg)(),(0,h.iD)("div",{ref_key:"modalRef",ref:n,class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"modalTitleLabel","aria-hidden":"true"},[(0,h._)("div",yt,[(0,h._)("div",bt,[(0,h._)("div",ft,[(0,h._)("h5",ht,[(0,h.WI)(e.$slots,"title")])]),(0,h._)("div",wt,[(0,h.WI)(e.$slots,"body")]),(0,h._)("div",_t,[(0,h.WI)(e.$slots,"buttons",{},(()=>[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(i,["stop"]),disabled:a.isLocked}," Cancel ",8,kt),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(l,["stop"]),disabled:a.isLocked},[a.isLocked?((0,h.wg)(),(0,h.iD)("span",Dt,Ct)):((0,h.wg)(),(0,h.iD)("span",Tt,"Confirm"))],8,gt)]))])])])],512))}});const Ft=Mt;var Ut=Ft;const jt=(0,h._)("span",null," You are about to remove a repetition. Doing so will cause the next reservations to be lost forever and unlink all previous reservations from this repetition.",-1),Pt=(0,h._)("br",null,null,-1),$t=(0,h._)("span",null,[(0,h._)("b",null,"Are you sure to remove the repetition?")],-1),Ot=(0,h._)("span",null," You are about to save changes to a periodic reservation. Would you like to apply the changes to the future reservations too?",-1),Et=(0,h._)("br",null,null,-1),Bt=(0,h._)("span",null,[(0,h._)("b",null,"Applying the changes will overwrite previous values.")],-1),Rt=["onClick"],It=["onClick"],Wt={key:0},At=(0,h._)("span",null,"You will not be able to reserve the following dates:",-1),Yt={key:1},Lt=(0,h._)("span",null,"This reservation is not possible.",-1),Zt=[Lt],zt=(0,h._)("br",null,null,-1),Vt={key:2},qt=(0,h._)("span",null,[(0,h.Uk)("The following reservations can be made, "),(0,h._)("b",null,"do you want to create them?")],-1),Kt={class:"text-start mb-2"},Nt={key:0},Xt=["onClick"],Jt=["onClick"],Gt={key:1},Qt=["onClick"],ea={class:"form-floating mb-3"},ta=["id"],aa=["for"],oa={class:"form-floating mb-3"},na=["id"],ia=["for"],la={class:"form-floating mb-3"},ra=["id"],sa=(0,h._)("option",{value:"-1",disabled:""},"Select a room",-1),ua=["value"],ca=["for"],da={class:"mb-3"},va={class:"form-floating"},pa=["id","value"],ma=["for"],ya={class:"row m-0 gx-1 mb-3"},ba={class:"col",style:{"min-width":"100px"}},fa={class:"form-floating"},ha=["id","value"],wa=["for"],_a={class:"col",style:{"min-width":"100px"}},ka={class:"form-floating"},ga=["id","value"],Da=["for"],Sa={class:"form-floating mb-3"},xa=["id","value"],Ca=["for"],Ta={class:"form-floating mb-3"},Ha=["id"],Ma=(0,h._)("option",{value:-1,disabled:""},"Select a reservation type",-1),Fa=["value"],Ua=["for"],ja={key:0,class:"mb-3"},Pa={key:1,class:"mb-3 border rounded p-2"},$a={class:"row mb-2 gx-1"},Oa={class:"col"},Ea={class:"form-floating"},Ba=["id","value","disabled"],Ra=["for"],Ia={class:"form-check form-switch mb-3"},Wa=["id"],Aa=["for"],Ya={name:"RoomReservationForm",components:{}};var La=(0,h.aZ)({...Ya,props:{reservation:null,isOpen:{type:Boolean},isNew:{type:Boolean},rooms:null,reservationTypes:null,users:null,periodicityTypes:null,weekdays:null,onPeriodicityDelete:null},emits:["saved","closed","cancelled"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(),n=k(_);class i{constructor(){(0,D.Z)(this,"hours",0),(0,D.Z)(this,"minutes",0)}static fromString(e){const t=e.split(":"),a=new i;return a.hours=parseInt(t[0]),a.minutes=parseInt(t[1]),a}}(0,D.Z)(i,"toString",(e=>`${e.hours}:${e.minutes}:00`));const l=(0,h.iH)(!1),r=(0,h.iH)(!1),s=(0,h.iH)(!1),u=(0,h.Fl)((()=>{const e=a.users[a.reservation.responsible];return e?`${e.first_name} ${e.last_name} (${e.username})`:"Unknown"})),c=(0,h.iH)(),d=(0,h.iH)(!1),v=(0,h.iH)(a.isOpen);(0,h.YP)((()=>a.isOpen),(e=>{v.value=e}));const p=(0,h.iH)(!1),m=(0,h.iH)(!1),y=(0,h.iH)(!1),b=(0,h.iH)(!1),f=(0,h.iH)(a.reservation.title),w=(0,h.iH)(a.reservation.description),g=(0,h.iH)(a.reservation.responsible),S=(0,h.iH)(a.reservation.room),x=(0,h.iH)(a.reservation.reservation_type),C=(0,h.Fl)((()=>null!=a.reservation.periodicity||null!=W.value)),H=(0,h.iH)(a.reservation.email),M=(0,h.iH)(i.fromString(a.reservation.start_time)),F=(0,h.iH)(i.fromString(a.reservation.end_time)),U=(0,h.iH)(a.reservation.date),j=(0,h.iH)(!1),P=(0,h.Fl)((()=>a.reservation.periodicity?a.reservation.periodicity:null)),$=(0,h.iH)(P.value?P.value.periodicity.start:a.reservation.date),O=(0,h.Fl)((()=>{const e=new Date($.value);return new Date(`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()+1}`)})),E=(0,h.iH)(P.value?P.value.periodicity.end:O.value.toLocaleDateString()),B=new Date(a.reservation.date).getDay(),R=(0,h.Fl)((()=>{const e=a.weekdays.find((e=>e.num===B-1));return e?.ref})),I=(0,h.iH)(P.value?a.periodicityTypes.find((e=>e[0]===P.value?.periodicity.periodicity_type)):void 0);(0,h.YP)((()=>a.reservation),(e=>{const t=e.periodicity;t?(I.value=a.periodicityTypes.find((e=>e[0]===t.periodicity.periodicity_type)),$.value=t.periodicity.start,E.value=t.periodicity.end):(I.value=void 0,$.value=a.reservation.date,E.value=O.value.toLocaleDateString())}));const W=(0,h.iH)(P.value?P.value.periodicity:null),A="border border-danger rounded",Y=(0,h.Fl)((()=>C.value&&void 0===I.value?A:"")),L=60*F.value.hours+F.value.minutes-(60*M.value.hours+M.value.minutes),Z=(0,h.iH)({id:I.value&&"BW"===I.value[0]&&P.value?P.value.periodicity.id:-1,start:$.value,end:E.value,periodicity_type:"BW",bw_weekdays:R.value?[R.value]:[],bw_weeks_interval:1}),z=(0,h.iH)({id:I.value&&"BM"===I.value[0]&&P.value?P.value.periodicity.id:-1,start:$.value,end:E.value,periodicity_type:"BM",bm_x_choice:1,bm_day_choice:R.value??""}),V=(0,h.iH)({id:I.value&&"EM"===I.value[0]&&P.value?P.value.periodicity.id:-1,start:$.value,end:E.value,periodicity_type:"EM"});if(a.reservation.periodicity)switch(a.reservation.periodicity.periodicity.periodicity_type){case"BW":{const e=a.reservation.periodicity.periodicity;Z.value.bw_weekdays=e.bw_weekdays,Z.value.bw_weeks_interval=e.bw_weeks_interval}break;case"BM":{const e=a.reservation.periodicity.periodicity;z.value.bm_day_choice=e.bm_day_choice,z.value.bm_x_choice=e.bm_x_choice}break}const q=(0,h.iH)({BW:Z.value,BM:z.value,EM:V.value});function K(){f.value=a.reservation.title,w.value=a.reservation.description,g.value=a.reservation.responsible,S.value=a.reservation.room,x.value=a.reservation.reservation_type,W.value=P.value?P.value.periodicity:null,H.value=a.reservation.email,M.value=i.fromString(a.reservation.start_time),F.value=i.fromString(a.reservation.end_time),U.value=a.reservation.date,l.value=!0,r.value=!0,s.value=!0}function N(){K(),we()}async function X(){d.value=!0,!a.isNew&&I.value?se():ne()}function J(){re()}function G(){y.value=!0,a.onPeriodicityDelete(a.reservation).then((e=>{W.value=null,y.value=!1,re()}))}function Q(){y.value=!0,ne(),m.value=!1,y.value=!1}function ee(){y.value=!1,d.value=!1,re()}function te(){d.value=!1,re()}function ae(){if(console.log("create reservations"),!o.value)return d.value=!1,void re();ne(!0)}function oe(){if(!I.value)return null;let e;switch(I.value[0]){case"BW":e=q.value.BW;break;case"EM":e=q.value.EM;break;case"BM":e=q.value.BM;break}return e}function ne(e=!1){const l=oe(),r=l?{periodicity:l}:a.reservation.periodicity,s={date:U.value,description:w.value,email:H.value,end_time:i.toString(F.value),id:Math.max(0,a.reservation.id),periodicity:r,responsible:g.value,room:S.value,start_time:i.toString(M.value),title:f.value,reservation_type:x.value,create_repetitions:e},u=a.isNew?n.post:n.put;u.roomReservation(s).then((e=>{t("saved",e),fe()}),(e=>{if(e instanceof Object&&Object.keys(e).includes("periodicity")){const t=e.periodicity;console.log(t);let a=[],n={},i={courses:[],reservations:[]},l=!1;Object.keys(t).includes("ok_reservations")&&(a=t.ok_reservations,l=!0),Object.keys(t).includes("nok_reservations")&&(l?n=t.nok_reservations:i=t.nok_reservations),o.value={possible_reservations:a,impossible_reservations:i,impossible_reservations_per_day:n},ue()}else ce(e)})).catch((e=>ce(e)))}function ie(){W.value&&W.value.id>0?le():j.value=!1}function le(){v.value=!1,b.value=!1,m.value=!1,p.value=!0}function re(){p.value=!1,b.value=!1,m.value=!1,v.value=!0}function se(){p.value=!1,b.value=!1,v.value=!1,m.value=!0}function ue(){v.value=!1,p.value=!1,m.value=!1,b.value=!0}function ce(e){c.value?.dismissAlerts(),T(e,c.value?.addAlert),d.value=!1}function de(e){c.value=e}function ve(e){U.value=e.replaceAll("/","-"),a.isNew&&($.value=U.value)}function pe(e){E.value=e.replaceAll("/","-")}function me(e){const t=60*e.hours+e.minutes;let a=60*F.value.hours+F.value.minutes;t>=a&&(a=t+L,ye({hours:Math.trunc(a/60),minutes:a%60})),M.value=e}function ye(e){const t=60*e.hours+e.minutes;let a=60*M.value.hours+M.value.minutes;t<=a&&(a=t-L,me({hours:Math.trunc(a/60),minutes:a%60})),F.value=e}function be(e){return`edit-room-reservation-${e}-${a.reservation.id}`}function fe(){d.value=!1,c.value?.close(),t("closed")}function we(){c.value?.close(),t("cancelled")}function _e(){j.value=!0}return(0,h.YP)($,(e=>{Object.values(q.value).forEach((t=>{t.start=e}))})),(0,h.YP)(E,(e=>{Object.values(q.value).forEach((t=>{t.end=e}))})),(0,h.m0)((()=>{q.value={BW:Z.value,BM:z.value,EM:V.value}})),(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h.Wm)(Ut,{"is-open":p.value,"is-locked":y.value,"on-cancel":J,"on-confirm":G},{title:(0,h.w5)((()=>[(0,h.Uk)("Periodicity deletion")])),body:(0,h.w5)((()=>[jt,Pt,$t])),_:1},8,["is-open","is-locked"]),(0,h.Wm)(Ut,{"is-open":m.value,"is-locked":y.value},{title:(0,h.w5)((()=>[(0,h.Uk)("Reservation changes")])),body:(0,h.w5)((()=>[Ot,Et,Bt])),buttons:(0,h.w5)((()=>[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(Q,["stop"])}," Only this one ",8,Rt),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(ee,["stop"]),disabled:""}," This one and the next ",8,It)])),_:1},8,["is-open","is-locked"]),(0,h.Wm)(Ut,{"is-open":b.value,"is-locked":y.value},{title:(0,h.w5)((()=>[(0,h.Uk)("Reservation conflicts")])),body:(0,h.w5)((()=>[o.value&&o.value.impossible_reservations_per_day&&o.value.possible_reservations.length>0?((0,h.wg)(),(0,h.iD)("div",Wt,[At,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(Object.entries(o.value.impossible_reservations_per_day),(e=>((0,h.wg)(),(0,h.iD)("ul",{class:"text-start mb-2",key:e[0]},[(0,h._)("li",null,(0,h.zw)(e[0]),1)])))),128))])):(0,h.kq)("",!0),o.value&&o.value.impossible_reservations&&0===o.value.possible_reservations.length?((0,h.wg)(),(0,h.iD)("div",Yt,Zt)):(0,h.kq)("",!0),zt,o.value&&o.value.possible_reservations.length>0?((0,h.wg)(),(0,h.iD)("div",Vt,[qt,(0,h._)("ul",Kt,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(o.value.possible_reservations,(e=>((0,h.wg)(),(0,h.iD)("li",{key:e.id},(0,h.zw)(new Date(e.date).toLocaleDateString()),1)))),128))])])):(0,h.kq)("",!0)])),buttons:(0,h.w5)((()=>[o.value&&o.value.possible_reservations.length>0?((0,h.wg)(),(0,h.iD)("div",Nt,[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(te,["stop"])}," No ",8,Xt),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(ae,["stop"])}," Yes ",8,Jt)])):((0,h.wg)(),(0,h.iD)("div",Gt,[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(te,["stop"])}," Cancel ",8,Qt)]))])),_:1},8,["is-open","is-locked"]),(0,h.Wm)(Pe,{"is-open":v.value,"is-locked":d.value,"on-cancel":N,"on-save":X,onInterface:de,class:"text-start"},{title:(0,h.w5)((()=>[(0,h.Uk)("Room reservation")])),body:(0,h.w5)((()=>[(0,h._)("div",ea,[(0,h.wy)((0,h._)("input",{id:be("title"),type:"text",class:"form-control",placeholder:"Title",maxlength:"30","onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e)},null,8,ta),[[h.nr,f.value]]),(0,h._)("label",{for:be("title"),class:"form-label"},"Title",8,aa)]),(0,h._)("div",oa,[(0,h.wy)((0,h._)("textarea",{id:be("description"),type:"text",class:"form-control",placeholder:"Description",rows:"2","onUpdate:modelValue":t[1]||(t[1]=e=>w.value=e)},null,8,na),[[h.nr,w.value]]),(0,h._)("label",{for:be("description"),class:"form-label"},"Description",8,ia)]),(0,h._)("div",la,[(0,h.wy)((0,h._)("select",{class:"form-select",id:be("room"),"onUpdate:modelValue":t[2]||(t[2]=e=>S.value=e)},[sa,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.rooms,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.id,value:e.id},(0,h.zw)(e.name),9,ua)))),128))],8,ra),[[h.bM,S.value]]),(0,h._)("label",{for:be("room"),class:"form-label"},"Room",8,ca)]),(0,h._)("div",da,[(0,h.Wm)(he,{"start-date":U.value,"should-reset":l.value,"on-reset":l.value=!1,"onUpdate:date":ve,"min-date":new Date,clearable:!1},{input:(0,h.w5)((({value:e})=>[(0,h._)("div",va,[(0,h._)("input",{id:be("date"),type:"text",class:"form-control",placeholder:"Date",value:e},null,8,pa),(0,h._)("label",{for:be("date"),class:"form-label"},"Date",8,ma)])])),_:1},8,["start-date","should-reset","on-reset","min-date"])]),(0,h._)("div",ya,[(0,h._)("div",ba,[(0,h.Wm)(Be,{hours:M.value.hours,minutes:M.value.minutes,onUpdateTime:me,"should-reset":r.value,onOnReset:t[3]||(t[3]=e=>r.value=!1)},{input:(0,h.w5)((({value:e})=>[(0,h._)("div",fa,[(0,h._)("input",{id:be("startTime"),type:"text",class:"form-control",placeholder:"Start time",value:e,readonly:""},null,8,ha),(0,h._)("label",{for:be("startTime"),class:"form-label"},"Start time",8,wa)])])),_:1},8,["hours","minutes","should-reset"])]),(0,h._)("div",_a,[(0,h.Wm)(Be,{hours:F.value.hours,minutes:F.value.minutes,onUpdateTime:ye,"should-reset":s.value,onOnReset:t[4]||(t[4]=e=>s.value=!1)},{input:(0,h.w5)((({value:e})=>[(0,h._)("div",ka,[(0,h._)("input",{id:be("endTime"),type:"text",class:"form-control",placeholder:"End time",value:e,readonly:""},null,8,ga),(0,h._)("label",{for:be("endTime"),class:"form-label"},"End time",8,Da)])])),_:1},8,["hours","minutes","should-reset"])])]),(0,h._)("div",Sa,[(0,h._)("input",{id:be("responsible"),type:"text",class:"form-control",placeholder:"Responsible",value:(0,h.SU)(u),disabled:""},null,8,xa),(0,h._)("label",{for:be("responsible"),class:"form-label"},"Responsible",8,Ca)]),(0,h._)("div",Ta,[(0,h.wy)((0,h._)("select",{class:"form-select",id:be("reservationType"),"onUpdate:modelValue":t[5]||(t[5]=e=>x.value=e)},[Ma,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.reservationTypes,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.id,value:e.id},(0,h.zw)(e.name),9,Fa)))),128))],8,Ha),[[h.bM,x.value]]),(0,h._)("label",{for:be("reservationType"),class:"form-label"},"Reservation type",8,Ua)]),(0,h.SU)(C)||j.value?((0,h.wg)(),(0,h.iD)("div",Pa,[(0,h._)("div",{class:"mb-2 text-center"},[(0,h._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:ie}," Remove repetition ")]),(0,h._)("div",$a,[(0,h._)("div",Oa,[(0,h.Wm)(he,{"start-date":E.value,"should-reset":l.value,"on-reset":l.value=!1,"onUpdate:date":pe,"min-date":(0,h.SU)(O),clearable:!1},{input:(0,h.w5)((({value:e})=>[(0,h._)("div",Ea,[(0,h._)("input",{id:be("periodicity-end-date"),type:"text",class:"form-control",placeholder:"Date",value:e,readonly:"",disabled:(0,h.SU)(C)},null,8,Ba),(0,h._)("label",{for:be("periodicity-end-date"),class:"form-label"},"Until",8,Ra)])])),_:1},8,["start-date","should-reset","on-reset","min-date"])])]),(0,h.Wm)(mt,{class:(0,h.C_)((0,h.SU)(Y)),types:a.periodicityTypes,weekdays:a.weekdays,"model-type":I.value,"onUpdate:model-type":t[6]||(t[6]=e=>I.value=e),modelPeriodicity:q.value,"onUpdate:modelPeriodicity":t[7]||(t[7]=e=>q.value=e),"is-disabled":(0,h.SU)(C)},null,8,["class","types","weekdays","model-type","modelPeriodicity","is-disabled"])])):((0,h.wg)(),(0,h.iD)("div",ja,[(0,h._)("button",{type:"button",class:"btn btn-info",onClick:_e},"Repeat")])),(0,h._)("div",Ia,[(0,h.wy)((0,h._)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>H.value=e),role:"switch",id:be("email"),disabled:""},null,8,Wa),[[h.e8,H.value]]),(0,h._)("label",{class:"form-check-label",for:be("email")},"Send a confirm email?",8,Aa)])])),_:1},8,["is-open","is-locked"])]))}});const Za=La;var za=Za;const Va={class:"row m-0 h-100"},qa={name:"CalendarRoomReservationSlot",components:{}};var Ka=(0,h.aZ)({...qa,props:{data:null,actions:null},emits:["interface"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(!1),n=(0,h.iH)(0),i=(0,h.iH)(),l=(0,h.iH)(!1);function r(){1!=++n.value?(clearTimeout(i.value),n.value=0,u()):i.value=setTimeout((()=>{n.value=0,s()}),300)}function s(){l.value||console.log(`Click on ${a.data.title}`)}function u(){l.value||b()}function c(e){const t=Object.assign({},a.data);t.reservation=e,a.actions.save?.(t,a.data)}function d(){a.actions.delete?.(a.data)}function v(){console.log("On duplicate")}function p(){f(),a.data.reservation.id<0&&d()}function m(){return o.value=!0,o.value}function y(){o.value=!1}function b(){l.value=!0}function f(){l.value=!1}function w(){t("interface",a.data.id,{openContextMenu:m,closeContextMenu:y})}return(0,h.bv)((()=>{w(),a.data.reservation.id<0&&(l.value=!0)})),(e,t)=>{const n=(0,h.up)("PopperComponent");return(0,h.wg)(),(0,h.j4)(n,{id:a.data.id,class:"frame",show:o.value,style:(0,h.j5)(a.data.displayStyle),arrow:"",onClick:(0,h.iM)(r,["left"])},{content:(0,h.w5)((()=>[(0,h.WI)(e.$slots,"contextmenu",{},(()=>[(0,h.Wm)(me,{data:a.data,"on-delete":d,"on-edit":u,"on-duplicate":v},null,8,["data"])]))])),default:(0,h.w5)((()=>[(0,h._)("div",null,[(0,h.Wm)(za,{reservation:a.data.reservation,"is-open":l.value,"is-new":a.data.reservation.id<0,rooms:a.data.rooms,"reservation-types":a.data.reservationTypes,"periodicity-types":a.data.periodicityTypes,users:a.data.users,weekdays:a.data.weekdays,periodicity:a.data.periodicity,"on-periodicity-delete":a.data.onPeriodicityDelete,onClosed:f,onSaved:c,onCancelled:p},null,8,["reservation","is-open","is-new","rooms","reservation-types","periodicity-types","users","weekdays","periodicity","on-periodicity-delete"]),(0,h._)("div",Va,[(0,h.WI)(e.$slots,"text")])])])),_:3},8,["id","show","style","onClick"])}}}),Na=a(3744);const Xa=(0,Na.Z)(Ka,[["__scopeId","data-v-39e2e90a"]]);var Ja=Xa;const Ga={class:"col-xl-6"},Qa={class:"col-xl-6"},eo={class:"col-xl-6"},to={class:"col-xl-6"},ao={name:"HourCalendarRoomReservationSlot",components:{}};var oo=(0,h.aZ)({...ao,props:{data:null,actions:null},setup(e){const t=e,a=(0,h.Fl)((()=>{const e=t.data.users[t.data.reservation.responsible];return e?.username})),o=(0,h.Fl)((()=>{const e=t.data.rooms[t.data.reservation.room];return e?.name}));return(e,n)=>((0,h.wg)(),(0,h.j4)(Ja,{data:t.data,actions:t.actions},{text:(0,h.w5)((()=>[(0,h._)("p",Ga,(0,h.zw)(t.data.title),1),(0,h._)("p",Qa,(0,h.zw)(t.data.reservation.description),1),(0,h._)("p",eo,(0,h.zw)((0,h.SU)(a)),1),(0,h._)("p",to,(0,h.zw)((0,h.SU)(o)),1)])),_:1},8,["data","actions"]))}});const no=oo;var io=no;const lo={class:"col-xl-auto"},ro={class:"col-xl-auto"},so={class:"col-xl-auto ms-auto"},uo={name:"RoomCalendarRoomReservationSlot",components:{}};var co=(0,h.aZ)({...uo,props:{data:null,actions:null},setup(e){const t=e,a=(0,h.Fl)((()=>{const e=t.data.users[t.data.reservation.responsible];return e?.username}));return(e,o)=>((0,h.wg)(),(0,h.j4)(Ja,{data:t.data,actions:t.actions},{text:(0,h.w5)((()=>[(0,h._)("p",lo,(0,h.zw)(t.data.reservation.title),1),(0,h._)("p",ro,(0,h.zw)((0,h.SU)(a)),1),(0,h._)("p",so,(0,h.zw)(t.data.startTime.text)+"-"+(0,h.zw)(t.data.endTime.text),1)])),_:1},8,["data","actions"]))}});const vo=co;var po=vo;const mo={class:"row m-0 course"},yo={name:"CalendarScheduledCourseSlot",components:{}};var bo=(0,h.aZ)({...yo,props:{data:null},emits:["interface"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(!1);function n(){console.log(a.data.title)}function i(){return!1}function l(){}function r(){t("interface",a.data.id,{openContextMenu:i,closeContextMenu:l})}return(0,h.bv)((()=>{r()})),(e,t)=>{const i=(0,h.up)("PopperComponent");return(0,h.wg)(),(0,h.j4)(i,{id:a.data.id,class:"frame",show:o.value,style:(0,h.j5)(a.data.displayStyle),onClick:n},{content:(0,h.w5)((()=>[])),default:(0,h.w5)((()=>[(0,h._)("div",mo,[(0,h.WI)(e.$slots,"text")])])),_:3},8,["id","show","style"])}}});const fo=(0,Na.Z)(bo,[["__scopeId","data-v-374ac3eb"]]);var ho=fo;const wo={class:"col-xl-6"},_o={class:"col-xl-6"},ko={class:"col-xl-6"},go={class:"col-xl-6"},Do={name:"HourCalendarScheduledCourseSlot",components:{}};var So=(0,h.aZ)({...Do,props:{data:null},setup(e){const t=e,a=(0,h.Fl)((()=>{const e=t.data.rooms[t.data.course.room];return e?.name}));return(e,o)=>((0,h.wg)(),(0,h.j4)(ho,{data:t.data},{text:(0,h.w5)((()=>[(0,h._)("p",wo,(0,h.zw)(t.data.course.course.module.abbrev),1),(0,h._)("p",_o,(0,h.zw)(t.data.department),1),(0,h._)("p",ko,(0,h.zw)(t.data.course.tutor),1),(0,h._)("p",go,(0,h.zw)((0,h.SU)(a)),1)])),_:1},8,["data"]))}});const xo=So;var Co=xo;const To={class:"col-xl-auto"},Ho={class:"col-xl-auto"},Mo={class:"col-xl-auto ms-auto"},Fo={name:"RoomCalendarScheduledCourseSlot",components:{}};var Uo=(0,h.aZ)({...Fo,props:{data:null},setup(e){const t=e;return(e,a)=>((0,h.wg)(),(0,h.j4)(ho,{data:t.data},{text:(0,h.w5)((()=>[(0,h._)("p",To,(0,h.zw)(t.data.course.course.module.abbrev),1),(0,h._)("p",Ho,(0,h.zw)(t.data.course.tutor),1),(0,h._)("p",Mo,(0,h.zw)(t.data.startTime.text)+"-"+(0,h.zw)(t.data.endTime.text),1)])),_:1},8,["data"]))}});const jo=Uo;var Po=jo;const $o=["for"],Oo=["id"],Eo=(0,h._)("option",{value:void 0},"Select an attribute",-1),Bo=["value","onClick"],Ro={class:"list-group"},Io=["value"],Wo={name:"DynamicSelect",components:{}};var Ao=(0,h.aZ)({...Wo,props:{values:null,selectedValues:null,label:null,id:null},emits:["update:selectedValues"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(a.values);function n(e,t){const a=o.value.findIndex((t=>t.value.id===e));a<0||(o.value[a].value=t,c())}(0,h.m0)((()=>{o.value=a.values}));const i=(0,h.iH)(a.selectedValues.map((e=>e.value.id))),l=(0,h.Fl)((()=>o.value.filter((e=>i.value.includes(e.value.id))))),r=(0,h.Fl)((()=>o.value.filter((e=>!i.value.includes(e.value.id)))));function s(e){i.value.push(e),c()}function u(e){i.value=i.value.filter((t=>t!=e)),c()}function c(){t("update:selectedValues",l.value)}return(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h._)("label",{for:a.id,class:"form-label"},(0,h.zw)(a.label),9,$o),(0,h._)("select",{id:a.id,class:"form-select w-auto ms-1","aria-label":"Select department"},[Eo,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(r),(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.value.id,value:e.value.id,onClick:t=>s(e.value.id)},(0,h.zw)(e.value.name),9,Bo)))),128))],8,Oo),(0,h._)("ul",Ro,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(Array.from(Array((0,h.SU)(l).length).keys()),(e=>((0,h.wg)(),(0,h.iD)("li",{key:(0,h.SU)(l)[e].value.id,value:(0,h.SU)(l)[e].value,class:"list-group-item"},[((0,h.wg)(),(0,h.j4)((0,h.LL)((0,h.SU)(l)[e].component),{value:(0,h.SU)(l)[e].value,"onUpdate:value":t=>n((0,h.SU)(l)[e].value.id,t),onRemoved:t=>u((0,h.SU)(l)[e].value.id)},null,40,["value","onUpdate:value","onRemoved"]))],8,Io)))),128))])]))}});const Yo=Ao;var Lo=Yo;const Zo={class:"row"},zo={class:"col"},Vo={name:"DynamicSelectedElement",components:{}};var qo=(0,h.aZ)({...Vo,props:{value:null},emits:["removed"],setup(e,{emit:t}){const a=e;function o(){t("removed",a.value.id)}return(e,t)=>((0,h.wg)(),(0,h.iD)("div",Zo,[(0,h._)("button",{type:"button",class:"btn-close col-auto","aria-label":"Close",onClick:o}),(0,h._)("div",zo,(0,h.zw)(a.value.name),1),(0,h.WI)(e.$slots,"input")]))}});const Ko=qo;var No=Ko,Xo=a(1231);const Jo={name:"DoubleThumbSlider",components:{}};var Go=(0,h.aZ)({...Jo,props:{initialMin:null,initialMax:null,min:null,max:null},emits:["update:min","update:max"],setup(e,{emit:t}){const a=e,o=(0,h.iH)();function n(e){if(!s.value)return o.value.valueMin=a.min,void(o.value.valueMax=a.max)}function i(){t("update:min",o.value.valueMin),t("update:max",o.value.valueMax)}function l(){u()}function r(){c(),i()}const s=(0,h.iH)(!1);function u(){s.value=!0}function c(){s.value=!1}return(e,t)=>((0,h.wg)(),(0,h.j4)((0,h.SU)(Xo.Z),{ref_key:"slider",ref:o,"base-class-name":"multi-range-slider slider",min:a.initialMin,max:a.initialMax,ruler:!1,label:!1,"min-value":a.initialMin,"max-value":a.initialMax,onInput:n,onMouseup:i,onMouseenter:l,onMouseleave:r},null,8,["min","max","min-value","max-value"]))}});const Qo=Go;var en=Qo;const tn={name:"DynamicSelectedElementNumeric",components:{}};var an=(0,h.aZ)({...tn,props:{value:null},emits:["update:value"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(a.value),n=(0,h.iH)(o.value.min),i=(0,h.iH)(o.value.max);return(0,h.YP)(n,(e=>{o.value.min=e,t("update:value",o.value)})),(0,h.YP)(i,(e=>{o.value.max=e,t("update:value",o.value)})),(e,t)=>((0,h.wg)(),(0,h.j4)(No,{value:a.value},{input:(0,h.w5)((()=>[(0,h.Wm)(en,{"initial-min":a.value.initialMin,"initial-max":a.value.initialMax,min:n.value,"onUpdate:min":t[0]||(t[0]=e=>n.value=e),max:i.value,"onUpdate:max":t[1]||(t[1]=e=>i.value=e)},null,8,["initial-min","initial-max","min","max"])])),_:1},8,["value"]))}});const on=an;var nn=on;const ln={class:"form-check form-switch"},rn={name:"DynamicSelectedElementBoolean",components:{}};var sn=(0,h.aZ)({...rn,props:{value:null},emits:["update:value"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(a.value),n=(0,h.Fl)({get(){return o.value.value},set(e){o.value.value=e}});return t("update:value",o.value),(e,t)=>((0,h.wg)(),(0,h.j4)(No,{value:a.value},{input:(0,h.w5)((()=>[(0,h._)("div",null,[(0,h._)("div",ln,[(0,h.wy)((0,h._)("input",{class:"form-check-input",type:"checkbox",role:"switch","onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(n)?n.value=e:null)},null,512),[[h.e8,(0,h.SU)(n)]])])])])),_:1},8,["value"]))}});const un=sn;var cn=un;const dn={class:"row"},vn=["for"],pn={key:0,class:"col-auto pe-0"},mn={class:"col-auto"},yn=["id"],bn={name:"ClearableInput",components:{}};var fn=(0,h.aZ)({...bn,props:{inputId:null,label:null,text:null},emits:["update:text"],setup(e,{emit:t}){const a=e,o=(0,h.Fl)({get(){return a.text},set(e){t("update:text",e)}});function n(){o.value=""}return(e,t)=>((0,h.wg)(),(0,h.iD)("div",dn,[(0,h._)("label",{for:a.inputId,class:"form-label"},(0,h.zw)(a.label),9,vn),a.text.length>0?((0,h.wg)(),(0,h.iD)("div",pn,[(0,h._)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=e=>n())})])):(0,h.kq)("",!0),(0,h._)("div",mn,[(0,h.wy)((0,h._)("input",{id:a.inputId,type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>(0,h.dq)(o)?o.value=e:null)},null,8,yn),[[h.nr,(0,h.SU)(o)]])])]))}});const hn=fn;var wn=hn;const _n=(0,h._)("span",null," You are about to remove a reservation related to a periodicity, would you want to remove only this reservation, all the related reservations or this one and all the next? ",-1),kn=["onClick"],gn=["onClick","disabled"],Dn={key:0},Sn=(0,h._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),xn=(0,h._)("span",{class:"visually-hidden"},"Loading...",-1),Cn=[Sn,xn],Tn={key:1},Hn=["onClick","disabled"],Mn={key:0},Fn=(0,h._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Un=(0,h._)("span",{class:"visually-hidden"},"Loading...",-1),jn=[Fn,Un],Pn={key:1},$n=["onClick","disabled"],On={key:0},En=(0,h._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Bn=(0,h._)("span",{class:"visually-hidden"},"Loading...",-1),Rn=[En,Bn],In={key:1},Wn={name:"DeletePeriodicReservationDialog",components:{}};var An=(0,h.aZ)({...Wn,props:{isOpen:{type:Boolean},reservation:null,onCancel:null,onConfirmCurrent:null,onConfirmAll:null,onConfirmFuture:null},setup(e){const t=e,a=(0,h.iH)(!1),o=(0,h.Fl)((()=>n.value||i.value||l.value)),n=(0,h.iH)(!1),i=(0,h.iH)(!1),l=(0,h.iH)(!1);function r(){t.onCancel()}function s(){n.value=!0,t.onConfirmCurrent(t.reservation)}function u(){i.value=!0,t.onConfirmAll(t.reservation)}function c(){l.value=!0,t.onConfirmFuture(t.reservation)}return(0,h.YP)((()=>t.isOpen),(e=>{n.value=!1,i.value=!1,l.value=!1})),(0,h.bv)((()=>{a.value=!0})),(e,a)=>((0,h.wg)(),(0,h.j4)(Ut,{"is-open":t.isOpen},{title:(0,h.w5)((()=>[(0,h.Uk)("Reservation deletion")])),body:(0,h.w5)((()=>[_n])),buttons:(0,h.w5)((()=>[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(r,["stop"])},"Cancel",8,kn),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(s,["stop"]),disabled:(0,h.SU)(o)},[n.value?((0,h.wg)(),(0,h.iD)("span",Dn,Cn)):((0,h.wg)(),(0,h.iD)("span",Tn,"Just this one"))],8,gn),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(u,["stop"]),disabled:(0,h.SU)(o)},[i.value?((0,h.wg)(),(0,h.iD)("span",Mn,jn)):((0,h.wg)(),(0,h.iD)("span",Pn,"All"))],8,Hn),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(c,["stop"]),disabled:(0,h.SU)(o)},[l.value?((0,h.wg)(),(0,h.iD)("span",On,Rn)):((0,h.wg)(),(0,h.iD)("span",In,"This one and all the next"))],8,$n)])),_:1},8,["is-open"]))}});const Yn=An;var Ln=Yn,Zn=a(6086);let zn="";const Vn=document.getElementById("json_data");if(Vn&&Vn.textContent){const e=JSON.parse(Vn.textContent);"api"in e&&(zn=e.api)}function qn(e){if(!document.cookie)return null;const t=document.cookie.split(";").map((e=>e.trim())).filter((t=>t.startsWith(e+"=")));return 0===t.length?null:decodeURIComponent(t[0].split("=")[1])}const Kn=qn("csrftoken");function Nn(e){const t=new Headers;return t.set("Content-Type","application/json"),Kn&&t.set("X-CSRFToken",Kn),{method:e,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:t,redirect:"follow",referrerPolicy:"no-referrer"}}async function Xn(e,t){return await fetch(e,t).then((async e=>{const t=await e.json();if(!e.ok){const a=t||`Error ${e.status}: ${e.statusText}`;return Promise.reject(a)}return t})).catch((e=>Promise.reject(e)))}async function Jn(e,t){const a=Nn("GET");let o="";t&&(o=Object.keys(t).map((e=>e+"="+t[e])).join("&"));const n=`${zn}${e}/?${o}`;return console.log(`Fetching ${n}...`),Xn(n,a)}async function Gn(e,t,a){if(!["PUT","POST","DELETE","PATCH"].includes(e))return Promise.reject("Method must be either PUT, POST, PATCH, or DELETE");const o=Nn(e);a.data&&(o.body=JSON.stringify(a.data));let n="/";a.id&&(n=`/${a.id}/`);const i=`${zn}${t}${n}`;return console.log(`Updating ${i}...`),Xn(i,o)}function Qn(e,t,a){const o={id:t,data:a};return Gn("PUT",e,o)}function ei(e,t){const a={data:t};return Gn("POST",e,a)}function ti(e,t,a){const o={id:t,data:a};return Gn("PATCH",e,o)}const ai=[];class oi{constructor(e,t,a,o){(0,D.Z)(this,"convertToApp",void 0),(0,D.Z)(this,"convertToAPI",void 0),(0,D.Z)(this,"onFetch",void 0),(0,D.Z)(this,"url",void 0),this.url=e,this.convertToApp=t,this.convertToAPI=a,this.onFetch=o}convertToPartialAPI(e){return Object.fromEntries(Object.entries(e).map((e=>{const t=e[0],a=e[1];return a?typeof a===typeof ai?[t,F(a)]:[t,a]:[]})))}async retrieve(e){return Jn(this.url,{id:e}).then(this.convertToApp)}async fetch(){return Jn(this.url,{}).then((e=>e.map(this.convertToApp))).then(this.onFetch)}async update(e,t){return Qn(this.url,e,this.convertToAPI(t)).then(this.convertToApp)}async create(e){return ei(this.url,this.convertToAPI(e)).then(this.convertToApp)}async partialUpdate(e,t){return ti(this.url,e,this.convertToPartialAPI(t)).then(this.convertToApp)}}function ni(e){return{id:e.id??-1,abbrev:e.abbrev??"Unknown"}}function ii(e){return{id:e.id??-1,abbrev:e.abbrev??"Unknown"}}const li=(0,Zn.Q_)("department",(()=>{const e=(0,h.iH)([]),t=(0,h.Fl)((()=>e.value)),a=new oi("fetch/alldepts",ni,ii,(t=>e.value=t));return{departments:t,remote:a}})),ri=(0,Zn.Q_)("room",(()=>{const e=(0,h.iH)([]),t=(0,h.Fl)((()=>e.value)),a=new oi("rooms/room",i,l,(t=>e.value=t)),o=(0,h.Fl)((()=>Object.fromEntries(e.value.map((e=>[e.id,e]))))),n=(0,h.Fl)((()=>{const t=li(),a={};return t.departments.forEach((t=>{a[t.id]=e.value.filter((e=>e.departments.findIndex((e=>e.id===t.id))>=0))})),a}));function i(e){const t=li(),a=ri();return{id:e.id??-1,departments:e.departments?t.departments.filter((t=>e.departments?.includes(t.id))):[],basic_rooms:e.basic_rooms??[],is_basic:e.is_basic??!0,name:e.name??"Unknown",subroom_of:a.rooms.filter((t=>e.id===t.id))}}function l(e){return{id:e.id??-1,departments:e.departments?F(e.departments):[],basic_rooms:e.basic_rooms??[],is_basic:e.is_basic??!0,name:e.name??"Unknown",subroom_of:e.subroom_of?F(e.subroom_of):[]}}return{rooms:t,remote:a,perId:o,perDepartment:n}})),si=e=>((0,h.dD)("data-v-efd0de00"),e=e(),(0,h.Cn)(),e),ui={key:0,class:"loader"},ci={class:"container-fluid"},di={class:"row"},vi={class:"col-6 col-md-5 col-lg-4 col-xl-3"},pi={class:"row"},mi={class:"col"},yi={class:"row mb-3"},bi=si((()=>(0,h._)("label",{for:"select-room",class:"form-label"},"Room:",-1))),fi={key:0,class:"col-auto pe-0"},hi={class:"col-auto"},wi=si((()=>(0,h._)("option",{value:void 0},"All rooms",-1))),_i=["value"],ki={class:"row mb-3"},gi=si((()=>(0,h._)("label",{for:"select-department",class:"form-label"},"Department:",-1))),Di={key:0,class:"col-auto pe-0"},Si={class:"col-auto"},xi=si((()=>(0,h._)("option",{value:void 0},"All departments",-1))),Ci=["value"],Ti={key:0,class:"row"},Hi={class:"mb-3"},Mi={class:"mb-3"},Fi={class:"col"},Ui={class:"row"},ji={class:"col-auto"},Pi={name:"RoomReservationView",components:{}};var $i=(0,h.aZ)({...Pi,setup(e){const t=(0,h.iH)(k(_)),a=(0,h.iH)(k(w));let o="",n=-1,i=0;const l=li(),r=ri(),s={list:(0,h.iH)([])},u={perDepartmentFilterBySelectedDepartments:(0,h.Fl)((()=>ee(r.perDepartment))),listFilterBySelectedDepartments:(0,h.Fl)((()=>{const e=[];return Object.values(u.perDepartmentFilterBySelectedDepartments.value).forEach((t=>{e.push(...t.filter((t=>!e.find((e=>e.id===t.id)))))})),e})),perIdFilterBySelectedDepartments:(0,h.Fl)((()=>Object.fromEntries(u.listFilterBySelectedDepartments.value.filter((e=>e.is_basic)).sort(((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()))).map((e=>[e.id,e]))))),listFilterBySelectedDepartmentsAndFilters:(0,h.Fl)((()=>{const e=[[Y.value,g.booleanList.value,(e,t)=>e.value!==t.value],[L.value,g.numericList.value,(e,t)=>Number(t.value)>=e.min&&Number(t.value)<=e.max]];let t=Object.values(u.perIdFilterBySelectedDepartments.value).filter((e=>e.name.toLowerCase().includes(Z.value.toLowerCase())));return t=t.filter((t=>{const a=t.id;let o=!0;return e.forEach((e=>{if(!o)return;const t=e[0],n=e[1],i=e[2];t.length>0&&t.forEach((e=>{const t=n.filter((t=>t.attribute===e.id));if(t.length>0){const n=t.find((e=>e.room===a));if(n&&!i(e,n))return void(o=!1)}}))})),o})),t}))},c={list:(0,h.Fl)((()=>Object.values(c.perDepartment.value).flat(1))),perDepartment:(0,h.iH)({}),perDepartmentFilterByDepartmentsAndRooms:(0,h.Fl)((()=>Object.fromEntries(Object.entries(c.perDepartment.value).map((e=>[e[0],e[1].filter((e=>Fe(e.room)&&Me(e.room)))]))))),perDay:(0,h.Fl)((()=>H(c.list.value,(e=>{const t=s.list.value.find((t=>t.ref===e.day))?.date;return t||"dateNotFound"})))),perDayPerRoomFilterBySelectedDepartments:(0,h.Fl)((()=>{const e={};return Object.entries(c.perDay.value).forEach((t=>{const a=t[0],o=t[1].filter((e=>{const t=Ue(e);return t&&W.value.includes(t)}));e[a]=H(o,(e=>`${e.room}`))})),e}))},d={perDepartment:(0,h.iH)({}),listFilterBySelectedDepartments:(0,h.Fl)((()=>Object.values(ee(d.perDepartment.value)).flat(1)))},v={list:(0,h.iH)([]),perDay:(0,h.Fl)((()=>H(v.list.value,(e=>{const t=new Date(e.date);return He(t.getDate(),t.getMonth()+1)}))))},p={list:(0,h.iH)([]),perId:(0,h.Fl)((()=>Object.fromEntries(p.list.value.map((e=>[e.id,e])))))},m={list:(0,h.iH)([]),perId:(0,h.Fl)((()=>Object.fromEntries(m.list.value.map((e=>[e.periodicity.id,e])))))},y=(0,h.iH)([]),b={list:(0,h.iH)([]),perId:(0,h.Fl)((()=>Object.fromEntries(b.list.value.map((e=>[e.id,e])))))},f={booleanList:(0,h.iH)([]),numericList:(0,h.iH)([])},g={booleanList:(0,h.iH)([]),numericList:(0,h.iH)([])},D=(0,h.iH)(),S=(0,h.iH)({value:0,text:""}),x=(0,h.iH)({value:0,text:""}),F=(0,h.iH)({value:0,text:""}),U=(0,h.iH)({value:0,text:""}),j=60,P="#3399ff",$=(0,h.iH)({week:a.value.week,year:a.value.year}),O=(0,h.iH)(!1),E=(0,h.iH)(),B=(0,h.iH)(!1),R=(0,h.iH)(),I=(0,h.iH)(),W=(0,h.Fl)((()=>{let e=[];if(I.value)e.push(I.value);else{if(!l.departments)return[];e=l.departments}return e})),A=(0,h.iH)([]),Y=(0,h.Fl)((()=>A.value.filter((e=>e.component===(0,h.Xl)(cn))).map((e=>e.value)))),L=(0,h.Fl)((()=>A.value.filter((e=>e.component===(0,h.Xl)(nn))).map((e=>e.value)))),Z=(0,h.iH)(""),V={list:(0,h.Fl)((()=>v.list.value.map(ae))),perDay:(0,h.Fl)((()=>{const e=Object.fromEntries(Object.entries(H(V.list.value,(e=>{const t=new Date(e.slotData.reservation.date);return He(t.getDate(),t.getMonth()+1)}))));return e})),perDayFilterBySelectedDepartmentsAndRooms:(0,h.Fl)((()=>{const e=Object.fromEntries(Object.entries(V.perDay.value).map((e=>[e[0],e[1].filter((e=>{const t=e.slotData.reservation.room;return Fe(t)&&Me(t)}))])));return e})),perDayPerRoomFilterBySelectedDepartments:(0,h.Fl)((()=>{const e=Object.fromEntries(Object.entries(V.perDay.value).map((e=>[e[0],H(e[1].filter((e=>Me(e.slotData.reservation.room))),(e=>`${e.slotData.reservation.room}`))])));return e}))},q={perDepartmentFilterBySelectedDepartmentsAndRooms:(0,h.Fl)((()=>{const e={};return Object.entries(c.perDepartmentFilterByDepartmentsAndRooms.value).map((t=>{const a=t[0];t[1].forEach((t=>{const o=s.list.value.find((e=>e.ref===t.day));if(!o)return;const n=d.listFilterBySelectedDepartments.value.find((e=>e.name===t.course.type));if(!n)return;const i=o.date,l=oe(t,n,a);ie(e,i,l)}))})),e})),perDayPerRoomFilterBySelectedDepartments:(0,h.Fl)((()=>{const e={};return Object.entries(c.perDayPerRoomFilterBySelectedDepartments.value).forEach((t=>{e[t[0]]=Object.fromEntries(Object.entries(t[1]).map((e=>{const t=[];return e[1].forEach((e=>{if(!Me(e.room))return;const a=d.listFilterBySelectedDepartments.value.find((t=>t.name===e.course.type));if(!a)return;const o=Ue(e);if(!o)return;const n=`${o.id}`;t.push(oe(e,a,n))})),[e[0],t]})))})),e}))},K=(0,h.iH)(),N={perDay:(0,h.Fl)((()=>{const e={};if(K.value){const t=K.value,a=ae(t),o=new Date(t.date),n=He(o.getDate(),o.getMonth()+1);ie(e,n,a)}return e})),perDayPerRoom:(0,h.Fl)((()=>{const e={};if(K.value){const t=K.value,a=ae(t),o=new Date(t.date),n=He(o.getDate(),o.getMonth()+1);e[n]={},ie(e[n],t.room,a)}return e}))},X=(0,h.Fl)((()=>({days:s.list.value,year:`${$.value.year}`}))),G=(0,h.Fl)((()=>{const e={};for(const t of[V.perDayFilterBySelectedDepartmentsAndRooms.value,q.perDepartmentFilterBySelectedDepartmentsAndRooms.value,N.perDay.value])Object.keys(t).forEach((a=>{t[a].forEach((t=>{ie(e,a,t)}))}));return Object.entries(e).forEach((e=>{e[1].sort(((e,t)=>e.slotData.startTime.value-t.slotData.startTime.value))})),Object.assign({slots:e,startTime:S.value.value-(60+S.value.value%60),endTime:x.value.value+(60-x.value.value%60)},X.value)})),Q=(0,h.Fl)((()=>{const e={};for(const t of[V.perDayPerRoomFilterBySelectedDepartments.value,q.perDayPerRoomFilterBySelectedDepartments.value,N.perDayPerRoom.value])Object.entries(t).forEach((t=>{const a=t[0];a in e||(e[a]={}),Object.entries(t[1]).forEach((t=>{t[1].forEach((o=>ie(e[a],t[0],o)))}))}));return Object.values(e).forEach((e=>{Object.values(e).forEach((e=>e.sort(((e,t)=>e.slotData.startTime.value-t.slotData.startTime.value))))})),Object.assign({slots:e,rooms:u.listFilterBySelectedDepartments.value.filter((e=>e.is_basic&&u.listFilterBySelectedDepartmentsAndFilters.value.findIndex((t=>t.id===e.id))>=0)).sort(((e,t)=>e.name.localeCompare(t.name)))},X.value)}));function ee(e){const t=Object.fromEntries(Object.entries(e).filter((([e])=>W.value.findIndex((t=>`${t.id}`===e))>=0)));return t}function te(e){if(!e)return;let t=e[0].day_start_time,a=e[0].day_finish_time,o=e[0].lunch_break_start_time,n=e[0].lunch_break_finish_time;e.forEach((e=>{t=Math.min(t,e.day_start_time),a=Math.max(a,e.day_finish_time),o=Math.min(o,e.lunch_break_start_time),n=Math.max(n,e.lunch_break_finish_time)})),S.value=M(t),x.value=M(a),F.value=M(o),U.value=M(n)}function ae(e){const t=e.start_time.split(":"),a=60*parseInt(t[0])+parseInt(t[1]),o=M(a),n=e.end_time.split(":"),i=60*parseInt(n[0])+parseInt(n[1]),l=M(i);let r="#ffffff";if(e.reservation_type in p.perId.value){const t=p.perId.value[e.reservation_type];r=t.bg_color}const c={reservation:e,rooms:u.perIdFilterBySelectedDepartments.value,users:b.perId.value,reservationTypes:Object.values(p.list.value),periodicityTypes:y.value,periodicity:e.periodicity,weekdays:s.list.value,day:e.date,startTime:o,endTime:l,title:e.title,id:`roomreservation-${e.id}`,displayStyle:{background:r},onPeriodicityDelete:()=>{if(!e.periodicity)return Promise.resolve();const t=e.periodicity.periodicity.id,a=ye(e);return a?a.then((e=>be(t))):Promise.reject(`Could not remove the reservations with periodicity id ${t}`)}};return{slotData:c,component:(0,h.XI)(R.value?io:po),actions:{delete:ve,save:ce}}}function oe(e,t,a){const o=M(e.start_time),n=M(e.start_time+t.duration);let i="";if(l.departments){const e=l.departments.find((e=>`${e.id}`===a));e&&(i=e.abbrev)}const r={course:e,department:i,rooms:u.perIdFilterBySelectedDepartments.value,day:e.day,startTime:o,endTime:n,title:e.course.module.abbrev,id:`scheduledcourse-${e.course.id}`,displayStyle:{background:P}};return{slotData:r,component:(0,h.XI)(R.value?Co:Po),actions:{save:void 0,delete:void 0}}}function ne(){const e=[];return e.push(...f.booleanList.value.map((e=>({component:(0,h.Xl)(cn),value:{id:e.id,name:e.name,value:!1}})))),e.push(...f.numericList.value.map((e=>{const t=g.numericList.value.filter((t=>t.attribute===e.id)).map((e=>e.value)),a=Math.min(...t),o=Math.max(...t);return{component:(0,h.Xl)(nn),value:{id:e.id,name:e.name,min:a,max:o,initialMin:a,initialMax:o}}}))),e}function ie(e,t,a){e[t]||(e[t]=[]),e[t].push(a)}function le(e){const a=e.week,o=e.year;return ge(),t.value.fetch.roomReservations({week:a,year:o}).then((e=>{v.list.value=e,K.value=void 0,ke()}))}function se(e,a){const o=e.week,n=e.year;ge(),c.perDepartment.value={};let i=a.length;if(0===i)return void ke();const l={};a.forEach((e=>{t.value.fetch.scheduledCourses({week:o,year:n,department:e.abbrev}).then((t=>{l[e.id]=t,0===--i&&(c.perDepartment.value=l,ke())}))}))}function ue(){return t.value.fetch.reservationPeriodicities().then((e=>{m.list.value=e}))}function ce(e,t){const a=e.reservation,o=t.reservation;if(o.id<0)return v.list.value.push(a),K.value=void 0,void(a.periodicity!=o.periodicity&&(le($.value),ue()));const n=v.list.value.findIndex((e=>e.id===o.id));n<0?console.error(`Could not find reservation with id: ${o.id}`):(a.periodicity!=o.periodicity&&(le($.value),ue()),v.list.value[n]=a)}function de(e,t){console.error(`${e}: ${t}`)}function ve(e){const t=e.reservation;if(!(t.id<0))return t.periodicity&&t.periodicity.periodicity.id>=0?(E.value=t,void(B.value=!0)):void _e(t);K.value=void 0}function pe(e){if(!e.periodicity||e.periodicity.periodicity.id<0)return;const a=e.periodicity.periodicity.id;t.value.fetch.roomReservations({periodicityId:a}).then((e=>{we(e).then((e=>{t.value.delete.reservationPeriodicity(a)})).finally(fe)}))}function me(e){if(!e.periodicity||e.periodicity.periodicity.id<0)return;const a=e.periodicity.periodicity.id,o=new Date(e.date);ye(e)?.then((t=>{he(e)})).then((e=>{const n=new Date(o);n.setDate(n.getDate()-1);const i=m.perId.value[a].periodicity;if(""===i.periodicity_type)return;let l;switch(i.periodicity_type){case"BM":l=t.value.patch.reservationPeriodicityByMonth;break;case"EM":l=t.value.patch.reservationPeriodicityEachMonthSameDate;break;case"BW":l=t.value.patch.reservationPeriodicityByWeek;break}return l(i.id,{end:n.toLocaleDateString()})}))?.then((e=>{le($.value),ue()})).finally(fe)}function ye(e){if(!e.periodicity||e.periodicity.periodicity.id<0)return;const a=e.periodicity.periodicity.id,o=new Date(e.date),n=o.getTime();return t.value.fetch.roomReservations({periodicityId:a}).then((e=>(e=e.filter((e=>new Date(e.date).getTime()>n)),we(e))))}function be(e){return t.value.delete.reservationPeriodicity(e).then((e=>{ue()})).then((e=>le($.value)))}function fe(){E.value=void 0,B.value=!1}function he(e){return t.value.delete.roomReservation(e.id).then((t=>{v.list.value=v.list.value.filter((t=>t.id!=e.id))}),(e=>T(e,de))).catch((e=>T(e,de)))}async function we(e){await Promise.all(e.map((async e=>await he(e))))}function _e(e){he(e),fe()}function ke(){--i<=0&&(O.value=!1)}function ge(){++i,O.value=!0}function De(e){R.value=r.rooms.find((t=>t.id===e))}function Se(e){I.value=l.departments.find((t=>t.id===e))}(0,h.m0)((()=>{console.log("Updating Week days"),t.value.fetch.weekdays({week:$.value.week,year:$.value.year}).then((e=>{s.list.value=e}))})),(0,h.m0)((()=>{console.log("Updating Rooms reservations");const e=$.value;le(e)})),(0,h.m0)((()=>{console.log("Updating Scheduled courses");const e=$.value;l.departments&&se(e,l.departments)})),(0,h.m0)((()=>{console.log("Updating time settings"),te(D.value)}));let xe=-1;function Ce(e){if(e.startDate.getDate()!=e.endDate.getDate())return void console.error("Reserving a room for more than a day is not accepted.");const t=C(e.startDate.getDate()),a=C(e.startDate.getMonth()+1),o=e.startDate.getFullYear(),i=`${o}-${a}-${t}`;K.value={date:i,description:"",email:!1,end_time:e.endTime.text,id:xe--,periodicity:null,reservation_type:-1,responsible:n,room:R.value?.id??-1,start_time:e.startTime.text,title:""}}function Te(e,t){const a=new Date,o=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`;K.value={date:o,description:"",email:!1,end_time:new Date(a.getTime()+6e4*j).toTimeString(),id:xe--,periodicity:null,reservation_type:-1,responsible:n,room:parseInt(t,10),start_time:a.toTimeString(),title:""}}function He(e,t){return`${C(e)}/${C(t)}`}function Me(e){const t=u.listFilterBySelectedDepartments.value.find((t=>t.id===e));return!(!t||!t.basic_rooms.find((t=>t.id===e)))}function Fe(e){return!(R.value&&!r.perId[e]?.basic_rooms.find((e=>e.id===R.value.id)))}function Ue(e){const t=Object.entries(c.perDepartment.value).find((t=>t[1].find((t=>t.id===e.id))));if(t){const e=t[0];return l.departments.find((t=>`${t.id}`===e))}}return(0,h.bv)((()=>{const e=document.getElementById("json_data");if(e&&e.textContent){const t=JSON.parse(e.textContent);"dept"in t&&(o=t.dept),"user_id"in t&&(n=t.user_id)}l.remote.fetch().then((e=>{if(e){I.value=e.find((e=>e.abbrev===o)),d.perDepartment.value={};const a={};let n=l.departments.length;e.forEach((e=>{t.value.fetch.courseTypes({department:e.abbrev}).then((t=>{a[e.id]=t,0===--n&&(d.perDepartment.value=a)}))}))}})),r.remote.fetch(),t.value.fetch.timeSettings().then((e=>{D.value=e})),t.value.fetch.roomReservationTypes().then((e=>{p.list.value=e})),ue(),t.value.fetch.reservationPeriodicityTypes().then((e=>{y.value=e})),t.value.fetch.users().then((e=>{b.list.value=e})),t.value.fetch.booleanRoomAttributes().then((e=>{f.booleanList.value=e})),t.value.fetch.numericRoomAttributes().then((e=>{f.numericList.value=e})),t.value.fetch.booleanRoomAttributeValues().then((e=>{g.booleanList.value=e})),t.value.fetch.numericRoomAttributeValues().then((e=>{g.numericList.value=e}))})),(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[O.value?((0,h.wg)(),(0,h.iD)("div",ui)):(0,h.kq)("",!0),(0,h.Wm)(Ln,{"is-open":B.value,reservation:E.value,"on-confirm-current":_e,"on-confirm-all":pe,"on-confirm-future":me,"on-cancel":fe},null,8,["is-open","reservation"]),(0,h._)("div",ci,[(0,h._)("div",di,[(0,h._)("div",vi,[(0,h.Wm)(J,{week:$.value.week,"onUpdate:week":t[0]||(t[0]=e=>$.value.week=e),year:$.value.year,"onUpdate:year":t[1]||(t[1]=e=>$.value.year=e)},null,8,["week","year"]),(0,h._)("div",pi,[(0,h._)("div",mi,[(0,h._)("div",yi,[bi,R.value?((0,h.wg)(),(0,h.iD)("div",fi,[(0,h._)("button",{type:"button",class:"btn-close",onClick:t[2]||(t[2]=e=>De(-1))})])):(0,h.kq)("",!0),(0,h._)("div",hi,[(0,h.wy)((0,h._)("select",{id:"select-room","onUpdate:modelValue":t[3]||(t[3]=e=>R.value=e),class:"form-select w-auto","aria-label":"Select room"},[wi,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(Object.values(u.perIdFilterBySelectedDepartments.value).filter((e=>e.is_basic)).sort(((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()))),(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.id,value:e},(0,h.zw)(e.name),9,_i)))),128))],512),[[h.bM,R.value]])])]),(0,h._)("div",ki,[gi,I.value?((0,h.wg)(),(0,h.iD)("div",Di,[(0,h._)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=e=>Se(-1))})])):(0,h.kq)("",!0),(0,h._)("div",Si,[(0,h.wy)((0,h._)("select",{id:"select-department","onUpdate:modelValue":t[5]||(t[5]=e=>I.value=e),class:"form-select w-auto ms-1","aria-label":"Select department"},[xi,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(l).departments,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.id,value:e},(0,h.zw)(e.abbrev),9,Ci)))),128))],512),[[h.bM,I.value]])])]),R.value?(0,h.kq)("",!0):((0,h.wg)(),(0,h.iD)("div",Ti,[(0,h._)("div",Hi,[(0,h.Wm)(wn,{"input-id":"filter-input-roomName",label:"Filter by room name:",text:Z.value,"onUpdate:text":t[6]||(t[6]=e=>Z.value=e)},null,8,["text"])]),(0,h._)("div",Mi,[(0,h.Wm)(Lo,(0,h.dG)({id:"filter-select-attribute",label:"Filter by attributes:",values:ne()},{"selected-values":A.value,"onUpdate:selected-values":t[7]||(t[7]=e=>A.value=e)}),null,16,["selected-values"])])]))])])]),(0,h._)("div",Fi,[(0,h._)("div",Ui,[(0,h._)("div",ji,[(0,h._)("div",null,[(0,h._)("span",{style:(0,h.j5)({color:P})}," ",4),(0,h.Uk)("Course")])]),((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(p.list.value,(e=>((0,h.wg)(),(0,h.iD)("div",{key:e.id,class:"col-auto"},[(0,h._)("div",null,[(0,h._)("span",{style:(0,h.j5)({color:e.bg_color})}," ",4),(0,h.Uk)((0,h.zw)(e.name),1)])])))),128))]),R.value?((0,h.wg)(),(0,h.j4)(z,{key:0,onDrag:Ce,values:(0,h.SU)(G)},null,8,["values"])):((0,h.wg)(),(0,h.j4)(re,{key:1,onNewSlot:Te,values:(0,h.SU)(Q),onRowHeaderClick:De},null,8,["values"]))])])])]))}});const Oi=(0,Na.Z)($i,[["__scopeId","data-v-efd0de00"]]);var Ei=Oi;const Bi=(0,h.ri)(Ei).use((0,Zn.WB)()),Ri=new Date,Ii=new Date(Ri.getFullYear(),0,1),Wi=Math.floor((Ri.getTime()-Ii.getTime())/864e5),Ai=Math.ceil(Wi/7),Yi=(0,h.iH)({week:Ai,year:Ri.getFullYear()}),Li=[{appName:"roomreservation",app:Bi}],Zi=(0,Zn.WB)();Li.forEach((({appName:e,app:t})=>{t.provide(_,(0,h.OT)(b)),t.provide(w,(0,h.OT)(Yi.value)),t.use(Zi),t.component("PopperComponent",g.Z),t.mount(`#${e}-app`)}))}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,o,n,i){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],n=e[c][1],i=e[c][2];for(var r=!0,s=0;s<o.length;s++)(!1&i||l>=i)&&Object.keys(a.O).every((function(e){return a.O[e](o[s])}))?o.splice(s--,1):(r=!1,i<l&&(l=i));if(r){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,n,i]}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,i,l=o[0],r=o[1],s=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(s)var c=s(a)}for(t&&t(o);u<l.length;u++)i=l[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},o=self["webpackChunkflopedt_front"]=self["webpackChunkflopedt_front"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(9940)}));o=a.O(o)})();
//# sourceMappingURL=app.js.map